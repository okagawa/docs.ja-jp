---
title: ファイアウォール手順
description: ファイアウォールで WCF サンプル用のポートまたはプログラムを有効にする方法について説明します。 要件とセキュリティ環境に応じて、次のいずれかの手順を使用します。
ms.date: 03/30/2017
ms.assetid: a7dc429f-65ac-4faf-974a-77d5fb977fe1
ms.openlocfilehash: de55d067960b8f2096c129f6feaf037219e06a96
ms.sourcegitcommit: 358a28048f36a8dca39a9fe6e6ac1f1913acadd5
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/23/2020
ms.locfileid: "85246142"
---
# <a name="firewall-instructions"></a>ファイアウォールの手順

Windows Communication Foundation (WCF) サンプルを機能させるには、ファイアウォールで複数のポートまたはプログラムを有効にする必要があります。 サンプルの多くは、通信する際に 8000 ～ 8003 の範囲のポートと 9000 のポートを使用します。 既定ではファイアウォールが有効なので、こうしたポートにはアクセスできません。 サンプル用にファイアウォールを有効にするには、要件とセキュリティ環境に応じて次のいずれかの手順を完了する必要があります。

- オプション 1: 実行中のサンプルを対話形式で有効にします。 ファイアウォールの構成をあらかじめ変更することなく、サンプルのビルドおよび実行の開始に進みます。 サンプルを実行すると、[ **Windows セキュリティ警告**] ダイアログボックスが表示されます。 対象のプログラムを、ブロック解除の一覧に対話形式で追加できます。 この手順では、この後サンプルを再起動する必要があります。

- オプション 2: サンプル プログラムをあらかじめ有効にしておきます。 **Windows ファイアウォールのコントロールパネル**アプレットを起動し、実行する予定のサンプルプログラムを有効にします。 実行可能ファイルが存在するように、プログラムを最初にビルドする必要があります。 手順の詳細については、後述を参照してください。

- オプション 3: ポート範囲をあらかじめ有効にしておきます。 **Windows ファイアウォールのコントロールパネル**アプレットを起動し、サンプルで使用されるポート80、443、8000-8003、9000を有効にします。 手順の詳細については、後述を参照してください。 このオプションは他の手順よりも安全性が低くなります。サンプルだけでなく、任意のプログラムでこれらのポートを使用できるようになるからです。

どの手順を使用するか判断に迷う場合は、最初のオプションを選択してください。 他のベンダのファイアウォールを実行している場合も、同様の変更が必要になる場合があります。

> [!IMPORTANT]
> ファイアウォールの構成を変更すると、セキュリティに影響します。 変更内容は記録し、サンプルの使用が終わったらそれらの変更点を削除することをお勧めします。

## <a name="enable-samples-programs-in-advance"></a>サンプルプログラムを事前に有効にする

1. サンプルをビルドします。

2. [ **Start**  >  **実行**の開始] を選択し、「」と入力し `firewall.cpl` ます。 これにより、[ **Windows ファイアウォール] コントロールパネル**アプレットが開きます。

    > [!NOTE]
    > Windows ファイアウォールを介して通信する機能が必要なサンプルを実行するには、ファイアウォール設定を変更するための権限が必要です。 一部のファイウォール設定を変更できず、コンピューターがドメインに接続される場合は、システム管理者がグループ ポリシーを使用してファイアウォール設定を管理している可能性があります。

3. Windows ファイアウォール経由でプログラムを許可するには、次のいずれかの操作固有の手順を実行します。

    - Windows 7 または Windows Server 2008 R2 で、[ **Windows ファイアウォールを介したプログラムまたは機能を許可**する] をクリックします。 [**設定の変更**] [  >  **別のプログラムの許可**] をクリックします。

    - Windows Vista または Windows Server 2008 の場合は、[ **Windows ファイアウォールによるプログラムの許可**] をクリックします。

4. [**例外**] タブで、[**プログラムの追加**] をクリックします。

5. **参照**ボタンをクリックし、実行するサンプルの実行可能ファイルを選択します。

6. 実行する予定のすべてのサンプルの実行可能ファイルを追加するまで、手順4と5を繰り返します。

7. [ **OK]** をクリックして、ファイアウォールアプレットを閉じます。

## <a name="enable-a-port-range-in-advance"></a>ポート範囲を事前に有効にする

1. [ **Start**  >  **実行**の開始] を選択し、「」と入力し `firewall.cpl` ます。 これにより、[ **Windows ファイアウォール] コントロールパネル**アプレットが開きます。

2. Windows 7 または Windows Server 2008 R2 の場合は、次の手順を実行します。

    1. [Windows ファイアウォール] ウィンドウの左側の列にある [**詳細設定**] をクリックします。

    2. 左側の列の [**受信の規則**] をクリックします。

    3. 右側の列で [**新しいルール**] をクリックします。

    4. [**ポート**] を選択し、[**次へ**] をクリックします。

    5. [ **TCP** ] を選択し `8000, 8001, 8002, 8003, 9000, 80, 443` 、[特定の**ローカルポート**] フィールドに「」と入力します。

    6. **[次へ]** をクリックします。

    7. [**接続を許可する**] を選択し、[**次へ**] をクリックします。

    8. [**ドメイン**と**プライベート**] を選択し、[**次へ**] をクリックします。

    9. このルール `WCF-WF 4.0 Samples` に名前を指定し、[**完了**] をクリックします。

    10. [**送信の規則**] をクリックし、手順 c ~ h を繰り返します。

3. Windows Vista または Windows Server 2008 では、次の手順を実行します。

    1. **[Windows ファイアウォールによるプログラムの許可]** をクリックします。

    2. [**例外**] タブで、[**ポートの追加**] をクリックします。

    3. 名前を入力し、ポート番号として「8000」と入力して、[ **TCP** ] オプションを選択します。

    4. [**スコープの変更**] ボタンをクリックし、[**マイネットワーク**(サブネット) のみ] オプションを選択して、[ **OK**] をクリックします。

    5. 手順 b ～ d を繰り返して、ポート 8001、8002、8003、9000、80、および 443 を設定します。

4. [ **OK]** をクリックして、ファイアウォールアプレットを閉じます。

> [!NOTE]
> サンプルの実行が終わったら、ファイアウォールのすべての例外を削除します。 これを行うには、[ **Windows ファイアウォール] コントロールパネル**アプレットを開き、前の手順で追加したプログラムまたはポートエントリを削除します。

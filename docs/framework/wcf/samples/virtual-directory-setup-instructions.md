---
title: 仮想ディレクトリのセットアップ手順
ms.date: 03/30/2017
ms.assetid: 3c62cab5-81a4-48b6-ac8c-9ce33a85a157
ms.openlocfilehash: 2d9443431601ffc712da40bd1c085f595471336b
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/09/2020
ms.locfileid: "84602363"
---
# <a name="virtual-directory-setup-instructions"></a>仮想ディレクトリのセットアップ手順
Windows Communication Foundation (WCF) サンプルは、%SystemDrive%\inetpub\wwwroot\servicemodelsamples フォルダーにマップされている servicemodelsamples という名前の共通の仮想ディレクトリを共有することを目的としています。  
  
> [!NOTE]
> %SystemDrive% は、インターネット インフォメーション サービス (IIS) がインストールされているドライブの場所に応じて、通常は C: または D: になります。  
  
 [Windows Communication Foundation サンプルの1回限りのセットアップ手順](one-time-setup-procedure-for-the-wcf-samples.md)で、setupvroot と cleanupvroot ファイルを実行して、仮想ディレクトリを作成できます。 この仮想ディレクトリを手動で作成する場合は、次の手順に従います。  
  
## <a name="procedures"></a>手順  
  
#### <a name="to-create-a-virtual-directory-in-iis-70-or-75"></a>IIS 7.0 または7.5 で仮想ディレクトリを作成するには  
  
1. [**スタート**] メニューの [ファイルの**実行**] をクリックし、「 **inetmgr.exe** 」と入力して、インターネットインフォメーションサービス (IIS) MMC スナップインを開きます。  
  
2. 左側のウィンドウで、コンピューターの名前のノードを展開し、[**サイト**] ノードを展開します。  
  
3. [既定の**Web サイト**] を右クリックし、[**アプリケーションの追加**] を選択して [**アプリケーションの追加] ウィンドウ**を開きます。  
  
4. ウィンドウで、作成する `servicemodelsamples` 仮想ディレクトリの別名として「」と入力します。  
  
5. 次のディレクトリを作成します。%SystemDrive%\inetpub\wwwroot\servicemodelsamples  
  
6. 物理パスを %SystemDrive%\inetpub\wwwroot\servicemodelsamples に設定します。  WCF サンプルの多くは、ビルド時にサービス実行可能ファイルをこの場所にコピーします。  
  
7. **[OK]** をクリックします。 Web アプリケーションが、WCF サンプル用に作成されました。  
  
    > [!NOTE]
    > すべての WCF サンプルで同じ servicemodelsamples Web アプリケーションが使用されるため、このタスクは1回だけ実行する必要があります。  
  
    > [!NOTE]
    > このドキュメントでは、`virtual directory`という用語は `Web application`と同じ意味で使用しています。  
  
     仮想ディレクトリを作成するだけでなく、そのプロパティを設定して、WCF サービスを実行できるようにする必要もあります。 詳細については、以下を参照してください。  
  
#### <a name="to-create-a-virtual-directory-in-iis-51-or-60"></a>仮想ディレクトリを IIS 5.1 または 6.0 で作成するには  
  
1. コマンドプロンプトウィンドウを開き、「」と入力して `start inetmgr` 、インターネットインフォメーションサービス (IIS) MMC スナップインを開きます。  
  
2. 左側のウィンドウで、コンピューターの名前のノードを展開し、[ **Web サイト**] ノードを展開します。  
  
3. [既定の**Web サイト**] を右クリックし、[**新規]、[仮想ディレクトリ**] の順に選択して、仮想ディレクトリの作成ウィザードを開きます。  
  
4. ウィザードで、作成する `servicemodelsamples` 仮想ディレクトリのエイリアスとして「」と入力します。  
  
5. パスを %SystemDrive%\inetpub\wwwroot\servicemodelsamples に設定します。 WCF サンプルの多くは、ビルド時にサービス実行可能ファイルをこの場所にコピーします。  
  
6. **[次へ]** をクリックします。  
  
7. 既定では、次のチェック ボックスがオンになっています。  
  
    - **読み取り**  
  
    - **[ASP などのスクリプトを実行する]**  
  
8. [**次へ**] をクリックし、[**完了**] をクリックしてウィザードを完了します。  
  
    > [!NOTE]
    > すべての WCF サンプルで同じ servicemodelsamples 仮想ディレクトリが使用されるため、このタスクは1回だけ実行する必要があります。  
  
#### <a name="to-set-additional-virtual-directory-properties-in-iis-70-or-75"></a>IIS 7.0 または7.5 で追加の仮想ディレクトリプロパティを設定するには  
  
1. servicemodelsamples ノードをクリックします。 ウィンドウの下端に沿って 2 つのビューが表示されます。 [**機能ビュー** ] を選択します (まだ選択されていない場合)。  
  
2. **ディレクトリ参照**のエントリをダブルクリックします。  
  
3. [操作] ウィンドウで、[**有効にする**] オプションを選択します。 これにより、Internet Explorer でディレクトリにアクセスできるようになり、サービスのデバッグに役立ちます。  
  
 最後に、servicemodelsamples フォルダーのセキュリティ プロパティを、他のユーザーがアクセスできるように設定する必要があります。 詳細については、以下を参照してください。  
  
#### <a name="to-set-additional-virtual-directory-properties-in-iis-51-or-60"></a>仮想ディレクトリの追加プロパティを IIS 5.1 または 6.0 で設定するには  
  
1. [Servicemodelsamples] ノードを右クリックし、[**プロパティ**] をクリックします。  
  
2. 既定では、次のチェック ボックスがオンになっています。  
  
    - **読み取り**  
  
    - **ログアクセス**  
  
    - **このリソースにインデックスを付けます**  
  
3. [**ディレクトリの参照**] チェックボックスをオンにします。 これにより、Internet Explorer でディレクトリにアクセスできるようになり、サービスのデバッグに役立ちます。  
  
#### <a name="to-set-security-properties-of-the-folder-in-iis-70-or-75"></a>IIS 7.0 または7.5 でフォルダーのセキュリティプロパティを設定するには  
  
1. %SystemDrive%\inetpub\wwwroot\servicemodelsamples に移動します。  
  
2. Servicemodelsamples フォルダーを右クリックし、[**共有**] または [**共有**] をクリックします。  
  
3. [**追加**] ボタンの左側にある下矢印をクリックします。  
  
4. [**検索**] エントリを選択します。 **[ユーザーまたはグループの選択**] ウィンドウが開きます。  
  
5. **[詳細設定]** をクリックします。  
  
6. [**場所**] をクリックします。 [**場所**] ウィンドウが開きます。  
  
7. 使用するコンピューターのエントリを選択します。 一覧表示されているドメインやネットワークのエントリではなく、ローカル コンピューターを選択してください。 コンピューターを選択したら、[ **OK]** をクリックします。  
  
8. **[Find Now]** をクリックします。 これで、ローカル コンピューターに関連付けられたオブジェクトが検索結果に表示されます。  
  
9. [**名前 (相対識別名)** ] 列で**IIS_IUSRS**エントリを探します。 そのエントリを選択し、[ **OK** ] をクリックして [検索結果] ウィンドウを閉じます。  
  
10. [ **OK]** をクリックして、[**ユーザーまたはグループの選択**] ウィンドウを閉じます。  
  
11. 変更を保持するには、[**共有**] をクリックします。  
  
12. 共有を有効にするための変更が完了したら、[**完了**] をクリックして [**ファイルの共有**] ウィンドウを閉じます。  
  
#### <a name="to-set-security-properties-of-the-folder-in-iis-51-or-60"></a>フォルダーのセキュリティ プロパティを IIS 5.1 または 6.0 で設定するには  
  
1. %SystemDrive%\inetpub\wwwroot\servicemodelsamples に移動します。  
  
2. **Servicemodelsamples**フォルダーを右クリックし、[**共有とセキュリティ**] をクリックします。  
  
3. **[セキュリティ]** タブをクリックします。  
  
4. IIS 6.0 を使用している場合は、[**グループ名またはユーザー名**] ボックスで、[**インターネットゲストアカウント**] が表示されていることを確認します。  
  
     表示されていない場合は、次の手順を実行します。  
  
    1. **[スタート]** ボタンをクリックし、**コントロール パネル** をクリックします。  
  
    2. [**ユーザーアカウント**] アイコンが表示されない場合は、[**カテゴリビューに切り替え] を**クリックします。  
  
    3. [**ユーザーアカウント**] アイコンをクリックします。  
  
    4. [コントロールパネルを選択してください] アイコンをクリックし、[**ユーザーアカウント**] をクリックします。  
  
    5. [**ユーザーアカウント**] ダイアログボックスで、[**詳細設定**] タブをクリックします。  
  
    6. **[詳細設定]** をクリックします。  
  
    7. [**ローカルユーザーとグループ**] ダイアログボックスで、[**ユーザー** ] フォルダーをクリックして展開します。  
  
    8. 右側のウィンドウで、[**インターネットゲストアカウント**] をダブルクリックします。  
  
    9. [**プロパティ**] ダイアログボックスで、インターネットゲストアカウントとして使用されている名前をコピーします。 既定では、その名前は "USR_" で始まり、その次にコンピューターの名前が続きます。  
  
    10. **[プロパティ]** ダイアログ ボックスを閉じます。  
  
    11. [**ローカルユーザーとグループ**] ダイアログボックスを閉じます。  
  
    12. [**ユーザーアカウント**] ダイアログボックスを閉じます。  
  
    13. [その他の**ユーザーアカウント**] ダイアログボックスを閉じます。  
  
    14. [ **Servicemodelsamples のプロパティ**] ダイアログボックスの [**セキュリティ**] タブで、[**追加**] をクリックします。  
  
    15. コンピューターの名前とバックスラッシュを入力し、インターネットユーザーアカウントの名前を貼り付けます (例、myMachineName \\ % internetguestaccountname%)。  
  
    16. [**名前の確認**] をクリックして、追加を確認します。 名前が有効な場合は、すべての文字が下線付きの大文字になります。  
  
5. IIS 6.0 の場合は、[**グループ名またはユーザー名**] ボックスに [ネットワークサービス] が表示されていることも確認します。  
  
     NETWORK SERVICE が表示されていない場合:  
  
    1. **[追加]** をクリックします。  
  
    2. **[ユーザーまたはグループの選択**] ダイアログボックスで、コンピューター名の後にバックスラッシュを入力します。  
  
    3. バックスラッシュの後に「 **service** 」と入力します (スペースは不要です)。  
  
    4. [**名前の確認**] をクリックします。  
  
    5. 複数の名前が見つかった場合は、[**ネットワークサービス**] を選択し、[ **OK**] をクリックします。  
  
    6. [ **OK** ] をクリックして、[**ユーザーまたはグループの選択**] ダイアログボックスを閉じます。  
  
6. IIS 5.1 で Windows XP SP2 を使用している場合は、[**グループ名またはユーザー名**] ボックスに、インターネットゲストアカウントと ASPNET の両方が表示されていることを確認します。  
  
     ASPNET ユーザーは、組み込みの**Users**セキュリティグループのメンバーである可能性があることに注意してください。 その場合、**ユーザー**グループがダイアログボックスに表示されている場合は、許可されたユーザーの一覧に個別のアイテムとして追加する必要はありません。  
  
     ASPNET が**Users**セキュリティグループに属しているかどうかを確認するには、次の手順を実行します。  
  
    1. **[スタート]** ボタンをクリックし、 **[コントロール パネル]** をクリックします。  
  
    2. [**ユーザーアカウント**] アイコンをクリックします。  
  
    3. [**グループ**] 列で、[ **ASPNET** ] の値が "Users" であることを確認します。  
  
## <a name="see-also"></a>関連項目

- [インターネット インフォメーション サービスのホスティング手順](internet-information-service-hosting-instructions.md)

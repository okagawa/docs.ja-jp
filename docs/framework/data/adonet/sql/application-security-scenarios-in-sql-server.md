---
title: SQL Server におけるアプリケーション セキュリティのシナリオ
ms.date: 03/30/2017
ms.assetid: 0164f3a4-406e-4693-bec3-03c8e18b46d7
ms.openlocfilehash: bf844f35a3504af52cdb6bf745862ad5098dfc5f
ms.sourcegitcommit: d2e1dfa7ef2d4e9ffae3d431cf6a4ffd9c8d378f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/07/2019
ms.locfileid: "70782695"
---
# <a name="application-security-scenarios-in-sql-server"></a>SQL Server におけるアプリケーション セキュリティのシナリオ
安全な SQL Server クライアント アプリケーションを作成するにあたって、絶対に正しいという唯一の方法はありません。 すべてのアプリケーションの要件、デプロイ環境、およびユーザーの作成はそれぞれ独自のものです。 アプリケーションを最初のデプロイ時に適切にセキュリティ保護しても、時間の経過と共にセキュリティが低下していく可能性があります。 将来発生する可能性がある脅威を正確に予測することはできません。  
  
 SQL Server は製品として多くのバージョンを経て進化し、開発者が安全なデータベース アプリケーションを作成するための最新のセキュリティ機能が組み込まれてきました。 しかし、普遍的なセキュリティがない以上、継続的に監視し更新してゆくことがどうしても必要になります。  
  
## <a name="common-threats"></a>一般的な脅威  
 開発者は、セキュリティ上の脅威とそれに対抗するツール、および、セキュリティ ホールを作らないようにするにはどうすればよいかを理解しておく必要があります。 セキュリティは、その輪の 1 つでも傷ついていると、全体の強度が低下する鎖と考えると良いでしょう。 以下は、このセクションの各トピックで詳しく取り上げているセキュリティ上の一般的な脅威を一覧にしたものです。  
  
### <a name="sql-injection"></a>SQL インジェクション  
 SQL インジェクションとは、悪意のあるユーザーによって、有効な入力データの代わりに Transact-SQL ステートメントが入力されることをいいます。 入力が検証されずにサーバーに直接渡され、挿入されたコードがアプリケーションによって誤って実行されると、この攻撃によってデータが破損または破壊される可能性があります。 SQL Server インジェクション攻撃を阻止する方法としては、ストアド プロシージャやパラメーター化コマンドを使用する方法のほか、動的 SQL を実行できないようにしたり、すべてのユーザーの権限を制限したりすることが考えられます。  
  
### <a name="elevation-of-privilege"></a>権限の昇格  
 権限の昇格攻撃は、ユーザーが、所有者や管理者など、信頼されたアカウントの権限で振る舞うことのできる状況で発生します。 常に最小権限のユーザー アカウントで実行し、必要なアクセス許可のみを割り当ててください。 コードの実行には管理者アカウントまたは所有者アカウントを使用しないでください。 これにより、攻撃が成功した場合に発生する可能性がある損害を限定できます。 追加のアクセス許可を必要とするタスクを実行する場合は、タスクの実行中にのみプロシージャ署名や権限借用を使用します。 証明書を使ってストアド プロシージャに署名したり、権限の借用を使用して一時的に権限を割り当てたりできます。  
  
### <a name="probing-and-intelligent-observation"></a>プローブと情報取得  
 プローブ攻撃には、アプリケーションから生成されるエラー メッセージを調べてセキュリティ上の脆弱性を探す手法がよく用いられます。 SQL Server エラー情報がエンド ユーザーに返されないように、すべての手続き型コードでエラー処理を実装します。  
  
### <a name="authentication"></a>認証  
 実行時にユーザー入力に基づいた接続文字列が構築される場合、SQL Server ログインを使用すると、接続文字列インジェクション攻撃が発生する可能性があります。 接続文字列の有効なキーワード ペアがチェックされない場合、攻撃者は余分な文字を挿入できるため、サーバー上の機密データやその他のリソースにアクセスできる可能性があります。 できるだけ Windows 認証を使用してください。 SQL Server ログインを使用する必要がある場合は、<xref:System.Data.SqlClient.SqlConnectionStringBuilder> を使用して、実行時に接続文字列を作成し、検証します。  
  
### <a name="passwords"></a>パスワード  
 侵入者は特権ユーザーのパスワードを取得または推測できたため、多くの攻撃が成功します。 パスワードは侵入者に対する防御の最前線であるため、システムのセキュリティにとって強力なパスワードを設定することは不可欠です。 混合モード認証のパスワード ポリシーを作成して適用します。  
  
 Windows 認証を使用する場合でも、`sa` アカウントに必ず強力なパスワードを割り当てます。  
  
## <a name="in-this-section"></a>このセクションの内容  
 [SQL Server でのストアド プロシージャを使用したアクセス許可の管理](managing-permissions-with-stored-procedures-in-sql-server.md)  
 ストアド プロシージャを使用して権限を管理したり、データ アクセスを制御したりする方法について説明します。 ストアド プロシージャは、セキュリティ上のさまざまな脅威に対抗する手段として効果的です。  
  
 [SQL Server での安全な動的 SQL の作成](writing-secure-dynamic-sql-in-sql-server.md)  
 ストアド プロシージャを使用して、安全な動的 SQL を作成する手法について説明します。  
  
 [SQL Server でのストアド プロシージャの署名](signing-stored-procedures-in-sql-server.md)  
 証明書を使ってストアド プロシージャに署名することで、ユーザーが直接アクセスしなくてもデータを利用できるようにする方法について説明します。 これにより、操作を直接実行するための権限が呼び出し元になくても、ストアド プロシージャで操作を実行できます。  
  
 [SQL Server での借用を使用したアクセス許可のカスタマイズ](customizing-permissions-with-impersonation-in-sql-server.md)  
 EXECUTE AS 句を使って他のユーザーの権限を借用する方法について説明します。 権限の借用では、呼び出し元の実行コンテキストが、特定のユーザーの実行コンテキストに切り替えられます。  
  
 [SQL Server における行レベルのアクセス許可の付与](granting-row-level-permissions-in-sql-server.md)  
 データ アクセスを制限する行レベルの権限を実装する方法について説明します。  
  
 [SQL Server でのアプリケーション ロールの作成](creating-application-roles-in-sql-server.md)  
 アプリケーション ロールの機能について説明します。  
  
 [SQL Server での複数データベースにまたがるアクセスの有効化](enabling-cross-database-access-in-sql-server.md)  
 セキュリティを損なうことなく複数データベースにまたがるアクセスを有効にする方法について説明します。  
  
## <a name="see-also"></a>関連項目

- [SQL Server のセキュリティ](sql-server-security.md)
- [SQL Server セキュリティの概要](overview-of-sql-server-security.md)
- [ADO.NET アプリケーションのセキュリティ保護](../securing-ado-net-applications.md)
- [ADO.NET の概要](../ado-net-overview.md)

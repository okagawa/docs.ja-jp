---
title: Blazorアプリホスティングモデル
description: Blazorまたはサーバー上のブラウザーで、アプリをホストするさまざまな方法について説明し WebAssembly ます。
author: danroth27
ms.author: daroth
no-loc:
- Blazor
- WebAssembly
ms.date: 09/11/2019
ms.openlocfilehash: a0d37392a65cfcbff9642476d9fdb1e5c662e66a
ms.sourcegitcommit: cb27c01a8b0b4630148374638aff4e2221f90b22
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/09/2020
ms.locfileid: "86173264"
---
# <a name="blazor-app-hosting-models"></a>Blazorアプリホスティングモデル

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

Blazorアプリは、ASP.NET Web フォームアプリと同じように、IIS でホストできます。 Blazorアプリは、次のいずれかの方法でホストすることもできます。

- クライアント側のブラウザー () WebAssembly 。
- ASP.NET Core アプリのサーバー側。

## <a name="blazor-webassembly-apps"></a>BlazorWebAssemblyアプリ

BlazorWebAssemblyアプリは、ベースの .net ランタイムでブラウザーで直接実行さ WebAssembly れます。 BlazorWebAssemblyアプリは、角度や反応などのフロントエンド JavaScript フレームワークと同様の方法で機能します。 ただし、JavaScript を記述するのではなく、C# を記述します。 .NET ランタイムは、アプリアセンブリおよび必要な依存関係と共に、アプリと共にダウンロードされます。 ブラウザープラグインまたは拡張機能は必要ありません。

ダウンロードしたアセンブリは、他の .NET アプリで使用するのと同じように、通常の .NET アセンブリです。 ランタイムでは .NET Standard がサポートされているため、既存の .NET Standard ライブラリをアプリで使用でき Blazor WebAssembly ます。 ただし、これらのアセンブリは引き続きブラウザーのセキュリティサンドボックスで実行されます。 一部の機能では、 <xref:System.PlatformNotSupportedException> ファイルシステムにアクセスしたり、任意のネットワーク接続を開いたりするなど、がスローされる場合があります。

アプリが読み込まれると、.NET ランタイムが開始され、アプリケーションアセンブリで参照されます。 アプリのスタートアップロジックが実行され、ルートコンポーネントがレンダリングされます。 Blazorコンポーネントから表示される出力に基づいて、UI の更新を計算します。 その後、DOM の更新が適用されます。

![Blazor WebAssembly](media/hosting-models/blazor-webassembly.png)

BlazorWebAssemblyアプリは純粋にクライアント側で実行します。 このようなアプリは、GitHub ページや Azure の静的な Web サイトのホスティングなどの静的サイトホスティングソリューションにデプロイできます。 .NET は、サーバーでは必要ありません。 通常、アプリの一部に対するディープリンクには、サーバー上のルーティングソリューションが必要です。 ルーティングソリューションは、要求をアプリのルートにリダイレクトします。 たとえば、このリダイレクトは、IIS の URL 書き換えルールを使用して処理できます。

とフルスタック .NET web 開発のすべての利点を得るには Blazor 、 Blazor WebAssembly ASP.NET Core でアプリをホストします。 クライアントとサーバーの両方で .NET を使用することにより、コードを簡単に共有し、1つの一貫した言語、フレームワーク、ツールのセットを使用してアプリをビルドできます。 Blazorには、 Blazor アプリと ASP.NET Core ホストプロジェクトの両方を含むソリューションを設定するための便利なテンプレートが用意されて WebAssembly います。 ソリューションをビルドすると、アプリから構築された静的ファイルは、 Blazor フォールバックルーティングが既に設定されている ASP.NET Core アプリによってホストされます。

## <a name="blazor-server-apps"></a>Blazorサーバーアプリ

[ Blazor アーキテクチャ](architecture-comparison.md#blazor)に関する議論から Blazor 、コンポーネントは出力をと呼ばれる中間の抽象化にレンダリング `RenderTree` します。 フレームワークは、 Blazor レンダリングされた内容を以前にレンダリングしたものと比較します。 違いは DOM に適用されます。 Blazorコンポーネントは、レンダリングされた出力の適用方法から切り離されます。 そのため、コンポーネント自体は、UI を更新するプロセスと同じプロセスで実行する必要はありません。 実際、同じコンピューターで実行する必要もありません。

サーバーアプリでは、 Blazor コンポーネントはブラウザーでクライアント側ではなくサーバー上で実行されます。 ブラウザーで発生した UI イベントは、リアルタイム接続を介してサーバーに送信されます。 イベントは、正しいコンポーネントインスタンスにディスパッチされます。 コンポーネントがレンダリングされ、計算された UI diff がシリアル化され、DOM に適用されるブラウザーに送信されます。

![BlazorServer](media/hosting-models/blazor-server.png)

BlazorASP.NET AJAX とコントロールを使用している場合は、サーバーホスティングモデルがよく知られている可能性があり <xref:System.Web.UI.UpdatePanel> ます。 コントロールは、 `UpdatePanel` ページ上のトリガーイベントに応じて部分ページ更新の適用を処理します。 がトリガーされると、は `UpdatePanel` 部分的な更新を要求し、ページを更新しなくても更新を適用します。 UI の状態は、を使用して管理され `ViewState` ます。 Blazorサーバーアプリは、アプリがクライアントとのアクティブな接続を必要とすると若干異なります。 また、すべての UI の状態はサーバー上で保持されます。 これらの違いを除けば、2つのモデルは概念的に似ています。

## <a name="how-to-choose-the-right-blazor-hosting-model"></a>適切ホスティングモデルを選択する方法 Blazor

[ Blazor ホスティングモデル](/aspnet/core/blazor/hosting-models)に関するドキュメントで説明されているように、さまざまな Blazor ホスティングモデルで異なるトレードオフがあります。

Blazor WebAssembly ホスティングモデルには、次のような利点があります。

- .NET サーバー側の依存関係がありません。 クライアントにダウンロードされた後、アプリは完全に機能しています。
- クライアントのリソースと機能が完全に活用されます。
- 作業がサーバーからクライアントにオフロードされます。
- アプリをホストするために ASP.NET Core Web サーバーが必要ありません。 サーバーレスの展開シナリオが可能です (たとえば、CDN からアプリを提供するなど)。

ホスティングモデルの欠点 Blazor WebAssembly は次のとおりです。

- ブラウザーの機能によってアプリが制限されます。
- サポートされているクライアントハードウェアとソフトウェア (たとえば、 WebAssembly サポート) が必要です。
- ダウンロード サイズが大きくなり、アプリの読み込みに時間がかかります。
- .NET ランタイムとツールのサポートが十分ではありません。 たとえば、 [.NET Standard](../../standard/net-standard.md)のサポートとデバッグには制限があります。

逆に、 Blazor サーバーホスティングモデルには、次のような利点があります。

- ダウンロードサイズはクライアント側アプリよりもはるかに小さく、アプリの読み込みにかかる時間が大幅に短縮されます。
- このアプリでは、.NET Core と互換性のある Api の使用を含め、サーバーの機能を最大限に活用できます。
- サーバー上の .NET Core はアプリの実行に使用されるため、デバッグなどの既存の .NET ツールは想定どおりに動作します。
- シン クライアントがサポートされています。 たとえば、サーバー側のアプリは、をサポートしていないブラウザー WebAssembly や、リソースが制限されたデバイスで動作します。
- アプリのコンポーネント コードを含め、アプリの .NET/C# コード ベースがクライアントに提供されません。

Blazorサーバーホスティングモデルの欠点は次のとおりです。

- UI の待機時間が長くなります。 すべてのユーザーの操作にネットワーク ホップが関与します。
- オフライン サポートがありません。 クライアント接続が失敗すると、アプリの動作が停止します。
- 多くのユーザーがいるアプリで、スケーラビリティが課題になります。 サーバーでは、複数のクライアント接続を管理し、クライアントの状態を処理する必要があります。
- アプリを提供するのに ASP.NET Core サーバーが必要です。 サーバーレス展開シナリオは使用できません。 たとえば、CDN からアプリを提供することはできません。

上記のトレードオフの一覧は、厄介な場合がありますが、ホスティングモデルは後で変更できます。 Blazor選択したホスティングモデルに関係なく、コンポーネントモデルは*同じ*です。 原則として、同じコンポーネントをいずれのホストモデルでも使用できます。 アプリのコードは変わりません。ただし、コンポーネントがモデルに依存しないホストを維持するために、抽象化を導入することをお勧めします。 抽象化により、アプリは別のホスティングモデルをより簡単に導入できます。

## <a name="deploy-your-app"></a>アプリのデプロイ

ASP.NET Web フォームアプリは、通常、Windows Server コンピューターまたはクラスター上の IIS でホストされます。 Blazorアプリも次のようにできます。

- 静的ファイルまたは ASP.NET Core アプリとして IIS でホストされます。
- ASP.NET Core の柔軟性を活用して、さまざまなプラットフォームやサーバーインフラストラクチャでホストすることができます。 たとえば、 Blazor Linux で[Nginx](/aspnet/core/host-and-deploy/linux-nginx)または[Apache](/aspnet/core/host-and-deploy/linux-apache)を使用してアプリをホストできます。 アプリを発行および展開する方法の詳細については Blazor 、 Blazor [ホストと配置](/aspnet/core/host-and-deploy/blazor/)に関するドキュメントを参照してください。

次のセクションで Blazor WebAssembly は、とサーバーアプリのプロジェクトの設定方法について説明し Blazor ます。

>[!div class="step-by-step"]
>[前へ](architecture-comparison.md)
>[次へ](project-structure.md)

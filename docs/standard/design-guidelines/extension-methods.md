---
title: 拡張メソッド
ms.date: 10/22/2008
ms.technology: dotnet-standard
ms.assetid: 5de945cb-88f4-49d7-b0e6-f098300cf357
ms.openlocfilehash: 55e6a816bbec401fdb061a3394635378b2f37424
ms.sourcegitcommit: e02d17b2cf9c1258dadda4810a5e6072a0089aee
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/01/2020
ms.locfileid: "85621601"
---
# <a name="extension-methods"></a>拡張メソッド
拡張メソッドは、インスタンスメソッド呼び出し構文を使用して静的メソッドを呼び出せるようにする言語機能です。 これらのメソッドは、メソッドが操作するインスタンスを表す1つ以上のパラメーターを受け取る必要があります。

 このような拡張メソッドを定義するクラスは "スポンサー" クラスと呼ばれ、static として宣言する必要があります。 拡張メソッドを使用するには、スポンサークラスを定義する名前空間をインポートする必要があります。

 ❌Frivolously は、特に所有していない型に対して拡張メソッドを定義しないようにします。

 型のソースコードを所有している場合は、代わりに通常のインスタンスメソッドを使用することを検討してください。 を所有しておらず、メソッドを追加する場合は、細心の注意を払ってください。 拡張メソッドを自由に使用すると、これらのメソッドを使用するように設計されていない型の Api が乱雑になる可能性があります。

 次のシナリオでは、拡張メソッドの使用を検討✔️。

- インターフェイスのすべての実装に関連するヘルパー機能を提供するために、がコアインターフェイスの観点で記述されている場合は、この機能を使用できます。 これは、具象実装がインターフェイスに割り当てられないことが原因です。 たとえば、演算子は、 `LINQ to Objects` すべての型の拡張メソッドとして実装され <xref:System.Collections.Generic.IEnumerable%601> ます。 したがって、すべての `IEnumerable<>` 実装は自動的に LINQ 対応になります。

- インスタンスメソッドで何らかの種類の依存関係が発生しても、そのような依存関係は依存関係管理規則に違反する可能性があります。 たとえば、からへの依存関係は <xref:System.String> <xref:System.Uri?displayProperty=nameWithType> 望ましくないと考えられます。そのため、を `String.ToUri()` 返すインスタンスメソッドは、 `System.Uri` 依存関係管理の観点からの不適切な設計になります。 を返す静的な拡張メソッドは、より `Uri.ToUri(this string str)` `System.Uri` 優れた設計になります。

 ❌で拡張メソッドを定義することは避けて <xref:System.Object?displayProperty=nameWithType> ください。

 VB ユーザーは、拡張メソッドの構文を使用して、オブジェクト参照に対してこのようなメソッドを呼び出すことはできません。 Vb では、このようなメソッドの呼び出しをサポートしていません。これは、VB では、参照をオブジェクトとして宣言すると、すべてのメソッドの呼び出しが遅延バインディングされる (実際のメンバーは実行時に決定されます) が、拡張メソッドへのバインドはコンパイル時 (事前バインディング) で決定されるためです。

 ガイドラインは、同じバインディング動作が存在する他の言語、または拡張メソッドがサポートされていない他の言語に適用されることに注意してください。

 ❌メソッドをインターフェイスに追加する場合や依存関係の管理用に使用する場合を除き、拡張メソッドを拡張型と同じ名前空間に配置しないでください。

 ❌異なる名前空間に存在する場合でも、同じシグネチャを持つ2つ以上の拡張メソッドを定義することは避けてください。

 型がインターフェイスであり、ほとんどの場合またはほとんどの場合に拡張メソッドを使用することを意図している場合は、拡張型と同じ名前空間で拡張メソッドを定義することを✔️してください。

 ❌通常は他の機能に関連付けられている名前空間で、機能を実装する拡張メソッドを定義しないでください。 代わりに、所属する機能に関連付けられている名前空間で定義します。

 ❌拡張メソッド専用の名前空間の汎用的な名前付け ("拡張機能" など) は避けてください。 代わりに、わかりやすい名前 ("Routing" など) を使用してください。

 *部分 &copy; 2005、2009 Microsoft Corporation。すべての権限が予約されています。*

 *2008 年 10 月 22 日に Microsoft Windows Development シリーズの一部として、Addison-Wesley Professional によって発行された、Krzysztof Cwalina および Brad Abrams による「[Framework Design Guidelines: Conventions, Idioms, and Patterns for Reusable .NET Libraries, 2nd Edition](https://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619)」 (フレームワーク デザイン ガイドライン: 再利用可能な .NET ライブラリの規則、用法、パターン、第 2 版) から Pearson Education, Inc. の許可を得て再印刷されています。*

## <a name="see-also"></a>関連項目

- [メンバーデザインのガイドライン](member.md)
- [フレームワークデザインのガイドライン](index.md)
